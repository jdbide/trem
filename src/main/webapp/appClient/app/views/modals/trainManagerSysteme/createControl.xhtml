<div class="modal fade" role="dialog" aria-labelledby="dataConfirmLabel"
	aria-hidden="false" data-keyboard="false" data-backdrop="static"
	data-focus-on="input:first">


	<modal visible="$parent.modalErrorsDetails"
		url="app/views/modals/trainManagerSysteme/errorDetails.xhtml"></modal>


	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<m-loader></m-loader>
			<div class="modal-header modal-header-socle">
				<h4 class="modal-title">Control Settings</h4>
			</div>
			<div class="modal-body modal-body-socle">
				<div class="modal-body-back-socle">
					<div class="modal-body-content-socle">
						<div class="form-group form-group-modal-socle">
							<p>1 - Select timetable file to compare:</p>

							<div class="col-md-12">
								<!-- image-preview-filename input [CUT FROM HERE]-->
								<div class="input-group">
									<input type="text" class="form-control input-filename"
										ng-value="$parent.files.firstFile.file.name"
										disabled="disabled"><span class="input-group-btn">
										<button type="button" class="btn btn-default fileBtn-clear"
											ng-show="showBtnFile(1)" ng-click="clickBtnClearFile(1)">
											<span class="glyphicon glyphicon-trash"></span> Clear
										</button>
										<button type="button" class="btn btn-default fileBtn-upload"
											ng-show="showBtnFile(1)" ng-click="clickBtnUploadFile(1)">
											<span class="glyphicon glyphicon-upload"></span> Upload
										</button> <!-- image-preview-input -->
										<div class="btn btn-default file-input">
											<span class="glyphicon glyphicon-folder-open"></span> <span
												class="file-title">Browse</span> <input type="file"
												name="input-file-preview"
												accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
												ng-model="$parent.files.firstFile.file"
												ngf-select="selectedFile(1)"
												ng-disabled="$parent.disabledAll" ngf-max-files="1"
												ngf-pattern="'.xlsx'"
												ngf-model-invalid="$parent.files.firstFile.invalidFile"
												required />
										</div>
									</span>
								</div>
							</div>

							<div
								ng-show="$parent.files.firstFile.invalidFile && $parent.files.firstFile.invalidFile.$errorMessages.pattern"
								class="col-md-12 " style="padding-top: 20px;">
								<div class="callout callout-danger">
									<p>Invalid type : please select a .xlsx file.</p>
								</div>
							</div>



							<div class="col-md-12 "
								ng-show="$parent.files.firstFile.etat.isStartTraitement">

								<div class="box box-solid">
									<div class="box-header with-border">
										<i class="fa fa-upload"></i>
										<h3 class="box-title">
											Uploading timeTable file <i
												ng-show="$parent.files.firstFile.etat.isFinishTraitement!=true"
												class="fa fa-refresh fa-spin"></i>
										</h3>
									</div>

									<div class="box-body">
										<!-- <div  class="clearfix" >
                        					<span class="pull-left">Upload file #{{files.firstFile.file.name}}</span>
                        					<small class="pull-right">{{$parent.files.firstFile.file.progress}}%</small>
                        					 <span>------ </span>
                        					<span ng-bind="$parent.files.firstFile.etat.isUploadSuccess"></span>
                      					</div> -->
										<!-- <div  class="progress xs">
				                        	<div style="width: {{$parent.files.firstFile.file.progress}}%;" class="progress-bar progress-bar-green"></div>
				                      	</div> -->
										<p ng-show="$parent.files.firstFile.etat.isUploadSuccess"
											class="text-green">
											Upload OK <i class="fa fa-check-square-o text-green"></i>
										</p>

										<p
											ng-show="$parent.files.firstFile.etat.isUploadSuccess == false"
											class="text-red">
											Upload KO <i class="fa fa-check-square-o text-red"></i>
											{{$parent.files.firstFile.msgError}}
											<button class="btn btn-yellow btn-sm pull-right "
												ng-click="showOrHideErrorsModal()">Show errors
												details</button>
										</p>
										<!-- <p ng-show="$parent.files.firstFile.etat.isFormatOk" class="text-green">
											Format check OK 
											<i class="fa fa-check-square-o text-green"></i>
										</p>
										<p ng-show="$parent.files.firstFile.etat.isFormatOk  == false" class="text-red">
											Format check KO 
											<i class="fa fa-check-square-o text-red"></i>
										</p>
										<p ng-show="$parent.files.firstFile.etat.isDataValidate" class="text-green">
											{{files.firstFile.etat.msgDataValidate}}
											<i class="fa fa-check-square-o text-green"></i>
										</p>
										<p ng-show="$parent.files.firstFile.etat.isDataValidate == false" class="text-red">
											Data validation Ko
											<i class="fa fa-check-square-o text-red"></i>
										</p> -->
										<p
											ng-show="$parent.files.firstFile.etat.isFinishTraitementSuccess==true && $parent.files.secondFile.etat.isStartTraitement!=true"
											class="text-green">Please upload yield file.</p>
									</div>
								</div>
							</div>

						</div>
						<div class="form-group form-group-modal-socle">
							<p>2 - Select yield file to compare :</p>
							<div class="col-md-12">
								<div class="input-group">
									<input type="text" class="form-control input-filename"
										ng-value="$parent.files.secondFile.file.name"
										disabled="disabled"><span class="input-group-btn">
										<button type="button" class="btn btn-default fileBtn-clear"
											ng-show="showBtnFile(2)" ng-click="clickBtnClearFile(2)">
											<span class="glyphicon glyphicon-trash"></span> Clear
										</button>
										<button type="button" class="btn btn-default fileBtn-upload"
											ng-show="showBtnFile(2)" ng-click="clickBtnUploadFile(2)">
											<span class="glyphicon glyphicon-upload"></span> Upload
										</button>
										<div class="btn btn-default file-input">
											<span class="glyphicon glyphicon-folder-open"></span> <span
												class="file-title">Browse</span> <input type="file"
												name="input-file-preview"
												accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
												ng-model="$parent.files.secondFile.file"
												ngf-select="selectedFile(2)"
												ng-disabled="$parent.disabledAll" ngf-max-files="1"
												ngf-pattern="'.xlsx'"
												ngf-model-invalid="$parent.files.secondFile.invalidFile"
												required />
										</div>
									</span>
									<!-- if (files.firstFile.isFinishTraitementSuccess!=true) return 'disabled' -->
								</div>
							</div>

							<div class="col-md-12 "
								ng-show="$parent.files.secondFile.etat.isStartTraitement">
								<div class="box box-solid">
									<div class="box-header with-border">
										<i class="fa fa-upload"></i>
										<h3 class="box-title">
											Uploading yield file <i
												ng-show="$parent.files.secondFile.etat.isFinishTraitement!=true"
												class="fa fa-refresh fa-spin"></i>
										</h3>
									</div>

									<div class="box-body">
										<!-- <div  class="clearfix">
                        					<span class="pull-left">Upload file #{{files.secondFile.file.name}}</span>
                        					<small class="pull-right">{{$parent.files.secondFile.file.progress}}%</small>
                      					</div>
                      					<div  class="progress xs">
				                        	<div style="width: {{$parent.files.secondFile.file.progress}}%;" class="progress-bar progress-bar-green"></div>
				                      	</div> -->
										<p ng-show="$parent.files.secondFile.etat.isUploadSuccess"
											class="text-green">
											Upload OK <i class="fa fa-check-square-o text-green"></i>
										</p>
										<p
											ng-show="$parent.files.secondFile.etat.isUploadSuccess == false"
											class="text-red">
											Upload KO <i class="fa fa-check-square-o text-red"></i>{{$parent.files.secondFile.msgError}}
											<button class="btn btn-yellow btn-sm pull-right "
												ng-click="showOrHideErrorsModal()">Show errors
												details</button>
										</p>



										<!-- <p ng-show="$parent.files.secondFile.etat.isFormatOk" class="text-green">
											Format check OK 
											<i class="fa fa-check-square-o text-green"></i>
										</p>
										<p ng-show="$parent.files.secondFile.etat.isFormatOk  == false" class="text-red">
											Format check KO 
											<i class="fa fa-check-square-o text-red"></i>
										</p>
										<p ng-show="$parent.files.secondFile.etat.isDataValidate" class="text-green">
											{{files.firstFile.etat.msgDataValidate}}
											<i class="fa fa-check-square-o text-green"></i>
										</p>
										<p ng-show="$parent.files.secondFile.etat.isDataValidate == false" class="text-red">
											Data validation Ko
											<i class="fa fa-check-square-o text-red"></i>
										</p> -->
										<!-- <p ng-show="$parent.files.secondFile.etat.isFinishTraitementSuccess" class="text-green">
											Please upload Timetable
										</p> -->
									</div>
								</div>
							</div>

						</div>

						<div class="form-group form-group-modal-socle">
							<p>3 - Select dataset to control :</p>
							<div class="col-md-2">
								<select class="form-control"
									ng-model="$parent.selectedStatusJeuDonnees"
									ng-change="changeStatusJeuDonnees()"
									ng-disabled="!($parent.files.firstFile.etat.isFinishTraitementSuccess && $parent.files.secondFile.etat.isFinishTraitementSuccess) || $parent.disabledAll">
									<option ng-value="StatusImportForControl.DRAFT">{{StatusImportForControl.DRAFT}}</option>
									<option ng-value="StatusImportForControl.ACTIVE">{{StatusImportForControl.ACTIVE}}</option>
								</select>
							</div>
							<div class="col-md-10">
								<select class="form-control"
									ng-disabled="!($parent.files.firstFile.etat.isFinishTraitementSuccess && $parent.files.secondFile.etat.isFinishTraitementSuccess) || $parent.disabledAll"
									ng-model="$parent.selectedIdJeuDonnees"
									ng-options="jeuDonnees.idJeuDonnees as jeuDonnees.titleJeuDonnees for (key, jeuDonnees) in $parent.listSelectedJeuDonnees">
								</select>
							</div>
						</div>
						<div class="form-inline form-inline-modal-socle">
							<p>TimeTable informations:</p>

							<div class="row" style="margin: 0px;">
								<div class="form-group col-md-6" style="overflow: hidden;">
									<label for="sel1" class="control-label col-md-3">Between:</label>

									{{dateDebut?(dateDebut | date:'dd/MM/yyyy'):'---'}} And:

									{{dateFin?(dateFin | date:'dd/MM/yyyy'):'---'}}
									<!--  <div>
										<input id="sel1" type="text" ng-disabled="true"
											ng-model="dateDebut?(dateDebut | date:'dd/MM/yyyy'):'date'">
									</div>-->
								</div>

								<!-- <div class="form-group col-md-6" style="overflow: hidden;">
									<input id="sel2" type="text" ng-disabled="true"
										ng-model="dateFin?(dateFin | date:'dd/MM/yyyy'):'date'">
								</div>-->
							</div>
						</div>
						<div class="form-group form-group-modal-socle">
							<label for="select_ods" class="col-sm-3 control-label">On
								the following ODs:</label>
							<div id="select_ods" class="col-lg">
								<input type="text" ng-disabled="true" ng-model="ods" >
							</div>

						</div>
						<h1>{{myForm.input_id_timetable.$valid}}</h1>
					</div>
				</div>
			</div>
			<div class="modal-footer modal-footer-socle">
				<button class="btn btn-success pull-left"
					ng-click="executeValidateControl()"
					ng-disabled="!($parent.files.firstFile.etat.isFinishTraitementSuccess && $parent.files.secondFile.etat.isFinishTraitementSuccess) || $parent.disabledAll">
					CONTROL DATA</button>
				<button class="btn btn-danger" ng-click="cancelControl()"
					ng-disabled="$parent.disabledAll">Cancel</button>
			</div>
		</div>
	</div>
</div>